<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>智能交易*姚 文档站</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/mql5yao/favicon.ico">
    <meta name="description" content="这是智能交易的文档站点。">
    <meta name="keywords" content="MQL,EA,智能交易,自动交易,量化,编程,培训">
    
    <link rel="preload" href="/mql5yao/assets/css/0.styles.c167a2d0.css" as="style"><link rel="preload" href="/mql5yao/assets/js/app.f23448f4.js" as="script"><link rel="preload" href="/mql5yao/assets/js/3.a8269cb7.js" as="script"><link rel="preload" href="/mql5yao/assets/js/14.17d955a5.js" as="script"><link rel="prefetch" href="/mql5yao/assets/js/10.a59489eb.js"><link rel="prefetch" href="/mql5yao/assets/js/11.1fde020f.js"><link rel="prefetch" href="/mql5yao/assets/js/12.a5634cbb.js"><link rel="prefetch" href="/mql5yao/assets/js/13.1e1b93d8.js"><link rel="prefetch" href="/mql5yao/assets/js/15.429599a3.js"><link rel="prefetch" href="/mql5yao/assets/js/16.bcf982ab.js"><link rel="prefetch" href="/mql5yao/assets/js/17.76fde0dd.js"><link rel="prefetch" href="/mql5yao/assets/js/18.49626d28.js"><link rel="prefetch" href="/mql5yao/assets/js/19.0f21f003.js"><link rel="prefetch" href="/mql5yao/assets/js/2.45a03fa6.js"><link rel="prefetch" href="/mql5yao/assets/js/20.18311061.js"><link rel="prefetch" href="/mql5yao/assets/js/21.63b34e06.js"><link rel="prefetch" href="/mql5yao/assets/js/22.a49527a7.js"><link rel="prefetch" href="/mql5yao/assets/js/23.2584759c.js"><link rel="prefetch" href="/mql5yao/assets/js/24.05b32517.js"><link rel="prefetch" href="/mql5yao/assets/js/25.991ff096.js"><link rel="prefetch" href="/mql5yao/assets/js/26.07e08c10.js"><link rel="prefetch" href="/mql5yao/assets/js/27.11150f9e.js"><link rel="prefetch" href="/mql5yao/assets/js/28.b5c9f3ea.js"><link rel="prefetch" href="/mql5yao/assets/js/29.a1ad142f.js"><link rel="prefetch" href="/mql5yao/assets/js/30.6da01d3d.js"><link rel="prefetch" href="/mql5yao/assets/js/31.28fa5dac.js"><link rel="prefetch" href="/mql5yao/assets/js/32.46aab1c1.js"><link rel="prefetch" href="/mql5yao/assets/js/33.f178c7a3.js"><link rel="prefetch" href="/mql5yao/assets/js/34.cd1eae3b.js"><link rel="prefetch" href="/mql5yao/assets/js/35.ee55e50b.js"><link rel="prefetch" href="/mql5yao/assets/js/36.56370362.js"><link rel="prefetch" href="/mql5yao/assets/js/37.2cc5b283.js"><link rel="prefetch" href="/mql5yao/assets/js/38.c3bba64a.js"><link rel="prefetch" href="/mql5yao/assets/js/39.86103eac.js"><link rel="prefetch" href="/mql5yao/assets/js/4.ffd96de7.js"><link rel="prefetch" href="/mql5yao/assets/js/40.0e36f079.js"><link rel="prefetch" href="/mql5yao/assets/js/41.17bccbf6.js"><link rel="prefetch" href="/mql5yao/assets/js/42.a40ca8ac.js"><link rel="prefetch" href="/mql5yao/assets/js/43.5a883397.js"><link rel="prefetch" href="/mql5yao/assets/js/44.19bdddfe.js"><link rel="prefetch" href="/mql5yao/assets/js/45.dec8257c.js"><link rel="prefetch" href="/mql5yao/assets/js/46.ed29615c.js"><link rel="prefetch" href="/mql5yao/assets/js/47.b6d07db1.js"><link rel="prefetch" href="/mql5yao/assets/js/48.d7ca24ca.js"><link rel="prefetch" href="/mql5yao/assets/js/5.47d44717.js"><link rel="prefetch" href="/mql5yao/assets/js/6.1f5c1ae1.js"><link rel="prefetch" href="/mql5yao/assets/js/7.1a679445.js"><link rel="prefetch" href="/mql5yao/assets/js/8.e80e8a9d.js"><link rel="prefetch" href="/mql5yao/assets/js/9.261aef18.js">
    <link rel="stylesheet" href="/mql5yao/assets/css/0.styles.c167a2d0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mql5yao/" class="home-link router-link-active"><img src="/mql5yao/logo.png" alt="智能交易*姚 文档站" class="logo"> <span class="site-name can-hide">智能交易*姚 文档站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mql5yao/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/mql5yao/Chapter/start.html" class="nav-link">
  文档
</a></div><div class="nav-item"><a href="/mql5yao/Cutleeks/" class="nav-link">
  割韭菜XX招
</a></div><div class="nav-item"><a href="/mql5yao/support/" class="nav-link">
  支持本站
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mql5yao/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/mql5yao/Chapter/start.html" class="nav-link">
  文档
</a></div><div class="nav-item"><a href="/mql5yao/Cutleeks/" class="nav-link">
  割韭菜XX招
</a></div><div class="nav-item"><a href="/mql5yao/support/" class="nav-link">
  支持本站
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>MQL5线上手册</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mql5yao/Chapter/start.html" class="sidebar-link">MQL5 参考</a></li><li><a href="/mql5yao/Chapter/one.html" class="sidebar-link">01 第一章 语言基础</a></li><li><a href="/mql5yao/Chapter/two.html" class="sidebar-link">02 第二章 标准常量，列举和架构</a></li><li><a href="/mql5yao/Chapter/three.html" class="sidebar-link">03 第三章 MQL5程序</a></li><li><a href="/mql5yao/Chapter/four.html" class="sidebar-link">04 第四章 预定义变量</a></li><li><a href="/mql5yao/Chapter/five.html" class="sidebar-link">05 第五章 普通函数</a></li><li><a href="/mql5yao/Chapter/six.html" class="sidebar-link">06 第六章 数组函数</a></li><li><a href="/mql5yao/Chapter/add1.html" class="sidebar-link">07 第add1章 矩阵和向量方法</a></li><li><a href="/mql5yao/Chapter/seven.html" class="sidebar-link">07 第七章 函数转换</a></li><li><a href="/mql5yao/Chapter/eight.html" class="sidebar-link">08 第八章 数学函数</a></li><li><a href="/mql5yao/Chapter/nine.html" class="sidebar-link">09 第九章 字符串函数</a></li><li><a href="/mql5yao/Chapter/ten.html" aria-current="page" class="active sidebar-link">10 第十章 日期和时间</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mql5yao/Chapter/ten.html#_10-1-timecurrent" class="sidebar-link">10.1 TimeCurrent</a></li><li class="sidebar-sub-header"><a href="/mql5yao/Chapter/ten.html#_10-2-timetradeserver" class="sidebar-link">10.2 TimeTradeServer</a></li><li class="sidebar-sub-header"><a href="/mql5yao/Chapter/ten.html#_10-3-timelocal" class="sidebar-link">10.3 TimeLocal</a></li><li class="sidebar-sub-header"><a href="/mql5yao/Chapter/ten.html#_10-4-timegmt" class="sidebar-link">10.4 TimeGMT</a></li><li class="sidebar-sub-header"><a href="/mql5yao/Chapter/ten.html#_10-5-timedaylightsaving" class="sidebar-link">10.5 TimeDaylightSaving</a></li><li class="sidebar-sub-header"><a href="/mql5yao/Chapter/ten.html#_10-6-timegmtoffset" class="sidebar-link">10.6 TimeGMTOffset</a></li><li class="sidebar-sub-header"><a href="/mql5yao/Chapter/ten.html#_10-7-timetostruct" class="sidebar-link">10.7 TimeToStruct</a></li><li class="sidebar-sub-header"><a href="/mql5yao/Chapter/ten.html#_10-8-structtotime" class="sidebar-link">10.8 StructToTime</a></li></ul></li><li><a href="/mql5yao/Chapter/eleven.html" class="sidebar-link">11 第十一章 账户信息</a></li><li><a href="/mql5yao/Chapter/twelve.html" class="sidebar-link">12 第十二章 检测</a></li><li><a href="/mql5yao/Chapter/thirteen.html" class="sidebar-link">13 第十三章 事件处理</a></li><li><a href="/mql5yao/Chapter/fourteen.html" class="sidebar-link">14 第十四章 市场信息</a></li><li><a href="/mql5yao/Chapter/fifteen.html" class="sidebar-link">15 第十五章 经济日历函数</a></li><li><a href="/mql5yao/Chapter/sixteen.html" class="sidebar-link">16 第十六章 时间序列和指标访问</a></li><li><a href="/mql5yao/Chapter/seventeen.html" class="sidebar-link">17 第十七章 自定义交易品种</a></li><li><a href="/mql5yao/Chapter/eighteen.html" class="sidebar-link">18 第十八章 图表操作</a></li><li><a href="/mql5yao/Chapter/ninteen.html" class="sidebar-link">19 第十九章 交易函数</a></li><li><a href="/mql5yao/Chapter/twenty.html" class="sidebar-link">20 第二十章 交易信号</a></li><li><a href="/mql5yao/Chapter/twentyone.html" class="sidebar-link">21 第二十一章 网络函数</a></li><li><a href="/mql5yao/Chapter/twentytwo.html" class="sidebar-link">22 第二十二章 程序端全局变量</a></li><li><a href="/mql5yao/Chapter/twentythree.html" class="sidebar-link">23 第二十三章 文件函数</a></li><li><a href="/mql5yao/Chapter/twentyfour.html" class="sidebar-link">24 第二十四章 自定义指标</a></li><li><a href="/mql5yao/Chapter/twentyfive.html" class="sidebar-link">25 第二十五章 物件函数</a></li><li><a href="/mql5yao/Chapter/twentysix.html" class="sidebar-link">26 第二十六章 技术指标</a></li><li><a href="/mql5yao/Chapter/twentyseven.html" class="sidebar-link">27 第二十七章 处理优化结果</a></li><li><a href="/mql5yao/Chapter/twentyeight.html" class="sidebar-link">28 第二十八章 工作事件</a></li><li><a href="/mql5yao/Chapter/twentynine.html" class="sidebar-link">29 第二十九章 使用OpenCL工作</a></li><li><a href="/mql5yao/Chapter/thirty.html" class="sidebar-link">30 第三十章 使用数据库</a></li><li><a href="/mql5yao/Chapter/thirtyone.html" class="sidebar-link">31 第三十一章 使用DirectX</a></li><li><a href="/mql5yao/Chapter/thirtytwo.html" class="sidebar-link">32 第三十二章 集成</a></li><li><a href="/mql5yao/Chapter/add2.html" class="sidebar-link">32 第add2章 ONNX模型</a></li><li><a href="/mql5yao/Chapter/thirtythree.html" class="sidebar-link">33 第三十三章 标准程序库</a></li><li><a href="/mql5yao/Chapter/AppendixI.html" class="sidebar-link">34 附录一 来自MQL4</a></li><li><a href="/mql5yao/Chapter/AppendixII.html" class="sidebar-link">35 附录二 MQL5 函数列表</a></li><li><a href="/mql5yao/Chapter/AppendixIII.html" class="sidebar-link">36 附录三 MQL5常量列表</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2> 第十章 日期和时间 </h2> <p>这一组函数用于处理 日期时间 类型数据(即一个整数，表示从1970.1.1 0:00时开始的秒数)。</p> <p>要安排更高精度的计数器和计时器，可以使用GetTickCount()函数，它以毫秒为单位。</p> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>TimeCurrent</td> <td>返回最后一个已知的服务器时间，为 日期时间 类型(最后一次报价的时间)</td></tr> <tr><td>TimeTradeServer</td> <td>返回交易服务器当前的计算机时间</td></tr> <tr><td>TimeLocal</td> <td>返回本地计算机的时间</td></tr> <tr><td>TimeGMT</td> <td>以本地计算机的时间计算出GMT时间，考虑夏令时</td></tr> <tr><td>TimeDaylightSavings</td> <td>返回夏令时的开关标帜</td></tr> <tr><td>TimeGMTOffset</td> <td>在考虑夏令时的情况下，以秒为单位返回当前GMT时间 和 本地计算机时间之间的差异</td></tr> <tr><td>TimeToStruct</td> <td>将 日期时间 值转换为MqlDateTime结构类型的变量</td></tr> <tr><td>StructToTime</td> <td>将MqlDateTime结构类型的变量转换为 日期时间 值</td></tr></tbody></table> <h2 id="_10-1-timecurrent"><a href="#_10-1-timecurrent" class="header-anchor">#</a> 10.1 TimeCurrent</h2> <p>返回最后访问的服务器时间，在“市场报价”窗口中选定的交易品种的最后一次报价的时间。在OnTick()处理程序中，该函数将返回已接收处理的时间。在其他情况下(例如，在处理程序OnInit()、OnDeinit()、OnTimer()等)，对于在&quot;市场报价&quot;窗口中的任何一个 交易品种 都有最后一个报价时间，时间在窗口标题上显示。这个时间值在交易服务器上形成，并不依靠你的电脑时间设置。此函数有两种调用方式。</p> <p><img src="/mql5yao/assets/img/thi30.4fc84191.png" alt="IMG_256"></p> <p>调用时无参数</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>datetime  <span class="token function">TimeCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>调用时，带MqlDateTime类型参量</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>datetime  <span class="token function">TimeCurrent</span><span class="token punctuation">(</span> 
   Mqldatetime<span class="token operator">&amp;</span>  dt_struct      <span class="token comment">// 结构类型变量 </span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>参数
dt_struct</p> <p>[out] MqlDateTime 结构类型变量</p> <p>返回值
日期时间 类型值</p> <p>注意
如果将MqlDateTime结构类型变量作为参数传递，则会相应地填充它。
要安排高精度的计数器和计时器，可以使用GetTickCount()函数，它以毫秒为单位。
在策略测试器中，根据历史数据对TimeCurrent()进行了模拟。</p> <h2 id="_10-2-timetradeserver"><a href="#_10-2-timetradeserver" class="header-anchor">#</a> 10.2 TimeTradeServer</h2> <p>返回计算出的交易服务器的当前时间。与TimeCurrent()不同，时间值的计算在客户机端执行，取决于计算机上的时间设置。此函数有两种调用方式。
调用时无参数</p> <p><code>datetime TimeTradeServer();</code></p> <p>调用时，带MqlDateTime类型参量</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>datetime  <span class="token function">TimeTradeServer</span><span class="token punctuation">(</span> 
   Mqldatetime<span class="token operator">&amp;</span>  dt_struct      <span class="token comment">// 结构类型变量 </span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>参数
dt_struct</p> <p>[out] MqlDateTime 结构类型变量</p> <p>返回值
日期时间 类型值</p> <p>注意
如果将MqlDateTime结构类型变量作为参数传递，则会相应地填充它。
要安排高精度的计数器和计时器，可以使用GetTickCount()函数，它以毫秒为单位。
在策略测试器中，根据历史数据对TimeCurrent()进行了模拟。</p> <h2 id="_10-3-timelocal"><a href="#_10-3-timelocal" class="header-anchor">#</a> 10.3 TimeLocal</h2> <p>返回客户端运行的电脑上的本地时间，此函数有两种调用方式。
调用时无参数</p> <p><code>datetime TimeLocal();</code></p> <p>调用时，带MqlDateTime类型参量</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>datetime  <span class="token function">TimeLocal</span><span class="token punctuation">(</span> 
   Mqldatetime<span class="token operator">&amp;</span>  dt_struct      <span class="token comment">// 结构类型变量 </span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>参数
dt_struct</p> <p>[out] MqlDateTime 结构类型变量</p> <p>返回值
日期时间 类型值</p> <p>注意
如果将MqlDateTime结构类型变量作为参数传递，则会相应地填充它。
要安排高精度的计数器和计时器，可以使用GetTickCount()函数，它以毫秒为单位。
在策略测试器中，TimeLocal()总是相当于模拟服务器时间的 TimeCurrent() 。</p> <h2 id="_10-4-timegmt"><a href="#_10-4-timegmt" class="header-anchor">#</a> 10.4 TimeGMT</h2> <p>返回GMT时间，这其中考虑了客户端本地时间，包含夏令时DST开关。此函数有两种调用方式。
调用时无参数</p> <p><code>datetime TimeGMT();</code></p> <p>调用时，带MqlDateTime类型参量</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>datetime  <span class="token function">TimeGMT</span><span class="token punctuation">(</span> 
   Mqldatetime<span class="token operator">&amp;</span>  dt_struct      <span class="token comment">// 结构类型变量 </span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>参数
dt_struct</p> <p>[out] MqlDateTime 结构类型变量</p> <p>返回值
日期时间 类型值</p> <p>注意
如果将MqlDateTime结构类型变量作为参数传递，则会相应地填充它
。 要安排高精度的计数器和计时器，可以使用GetTickCount()函数，它以毫秒为单位。
在策略测试器中，TimeGMT() 总是相当于模拟服务器时间的 TimeTradeServer()。</p> <h2 id="_10-5-timedaylightsaving"><a href="#_10-5-timedaylightsaving" class="header-anchor">#</a> 10.5 TimeDaylightSaving</h2> <p>如果已切换到夏令时，则以秒为单位，返回对夏令时的校正。这取决于你电脑的时间设置。</p> <p><code>int TimeDaylightSavings();</code></p> <p>返回值
如果转换成冬季(标准)时间，则返回0。</p> <h2 id="_10-6-timegmtoffset"><a href="#_10-6-timegmtoffset" class="header-anchor">#</a> 10.6 TimeGMTOffset</h2> <p>返回当前GMT时间和本地计算机时间之间的时间差，考虑冬季(标准)或夏令时的切换。取决于你电脑的时间设置。</p> <p><code>int TimeGMTOffset();</code></p> <p>返回值
整数型 数值，以秒为单位。计算GMT 时间和本地电脑时间之间的差异。</p> <p><code>TimeGMTOffset() = TimeGMT() - TimeLocal()</code></p> <h2 id="_10-7-timetostruct"><a href="#_10-7-timetostruct" class="header-anchor">#</a> 10.7 TimeToStruct</h2> <p>转变 日期时间 类型的值(数字从1970.01.01以秒开始)到结构变量 MqlDateTime 中。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">bool</span>  <span class="token function">TimeToStruct</span><span class="token punctuation">(</span> 
   datetime      dt<span class="token punctuation">,</span>            <span class="token comment">// 日期时间 </span>
   Mqldatetime<span class="token operator">&amp;</span>  dt_struct      <span class="token comment">// 采用值的结构 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>参数
dt</p> <p>[in] 用于转换的数值。</p> <p>dt_struct</p> <p>[out] 结构类型MqlDateTime变量</p> <p>返回值
如果成功返回true，否则false。若要获得有关错误的信息，请调用GetLastError() 函数。</p> <h2 id="_10-8-structtotime"><a href="#_10-8-structtotime" class="header-anchor">#</a> 10.8 StructToTime</h2> <p>转变结构变量 MqlDateTime 到 日期时间 类型值，然后返回结果值。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>datetime  <span class="token function">StructToTime</span><span class="token punctuation">(</span> 
   MqlDateTime<span class="token operator">&amp;</span>  dt_struct      <span class="token comment">// 日期和时间结构 </span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>参数
dt_struct</p> <p>[in] 结构类型变量MqlDateTime。</p> <p>返回值
日期时间型的值包括从01.01.1970起的以秒为单位的数值。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mql5yao/Chapter/nine.html" class="prev">
        09 第九章 字符串函数
      </a></span> <span class="next"><a href="/mql5yao/Chapter/eleven.html">
        11 第十一章 账户信息
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/mql5yao/assets/js/app.f23448f4.js" defer></script><script src="/mql5yao/assets/js/3.a8269cb7.js" defer></script><script src="/mql5yao/assets/js/14.17d955a5.js" defer></script>
  </body>
</html>
