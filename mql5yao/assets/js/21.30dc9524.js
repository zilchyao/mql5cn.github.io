(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{446:function(t,n,_){"use strict";_.r(n);var v=_(14),s=Object(v.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",[t._v("来自 MQL4 ")]),t._v(" "),n("p",[t._v("MQL5是前任MQL4语言的发展，其中编辑进去许多指标，脚本和EA交易。尽管事实上，新的程序语言最大化的与前一代相匹配，但在这些语言之间，仍有区别，当转换程序时，这些区别应该标注出来。")]),t._v(" "),n("p",[t._v("对于了解MQL4的程序员来说，新的MQL5语言，该章节涵盖了促进代码改编进化的所有信息。")]),t._v(" "),n("p",[t._v("首先应该标明的是：")]),t._v(" "),n("ul",[n("li",[t._v("新语言不包括函数start()， init() 和 deinit()；")]),t._v(" "),n("li",[t._v("指标缓冲区数量不限制；")]),t._v(" "),n("li",[t._v("在下载EA程序后（或者其他MQL5程序），dll立即被加载；")]),t._v(" "),n("li",[t._v("检测缩写的逻辑条件；")]),t._v(" "),n("li",[t._v("当数组超过限制时，结束当前操作（紧急的-错误输出）；")]),t._v(" "),n("li",[t._v("像C++一样运算符优先；")]),t._v(" "),n("li",[t._v("该语言提供隐式类型（甚至从字符串到数字）；")]),t._v(" "),n("li",[t._v("局部变量不能自动初始化（除了字符串）；")]),t._v(" "),n("li",[t._v("普通本地数组自动删除。")])]),t._v(" "),n("p",[n("b",[t._v("特殊函数 init, start and deinit")])]),t._v(" "),n("p",[t._v("MQL4语言只包括3个预定函数可以操作指标，脚本或者EA交易（不包括files "),n("code",[t._v("*.mqh")]),t._v("和数据库文件）。在MQL5中没有那样的函数，但有与之相类似的函数，图表表明了近似函数。")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("MQL4")]),t._v(" "),n("th",[t._v("MQL5")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("init")]),t._v(" "),n("td",[t._v("OnInit")])]),t._v(" "),n("tr",[n("td",[t._v("start")]),t._v(" "),n("td",[t._v("OnStart")])]),t._v(" "),n("tr",[n("td",[t._v("deinit")]),t._v(" "),n("td",[t._v("OnDeinit")])])])]),t._v(" "),n("p",[t._v("在MQL4中，函数 OnInit 和 OnDeinit 在 init 和 deinit 程序中执行了相同的任务-他们是为本地代码设计的，一定在MQL5程序的初始化过程中执行，可以因此重命名函数，或者以他们本身的形式呈现，但是在类似位置这些函数可以添加调用。")]),t._v(" "),n("p",[t._v("示例：")]),t._v(" "),n("div",{staticClass:"language-cpp line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("OnInit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//--- 调用函数去初始化")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("OnDeinit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//--- 调用无法初始化函数")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("deinit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//---")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[t._v("开始函数只在脚本中被OnStart代替，在EA交易和指标中应该分别重命名成OnTick和OnCalculate。在MQL5程序操作过程中，这些代码可以执行，并保存3个函数中：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("mql5程序")]),t._v(" "),n("th",[t._v("主函数")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("脚本")]),t._v(" "),n("td",[t._v("OnStart")])]),t._v(" "),n("tr",[n("td",[t._v("指标")]),t._v(" "),n("td",[t._v("OnCalculate")])]),t._v(" "),n("tr",[n("td",[t._v("EA交易")]),t._v(" "),n("td",[t._v("OnTick")])])])]),t._v(" "),n("p",[t._v("如果指标或者代码不包括主函数，或者函数名称与要求的不相符，该函数的调用就不能执行。这表示了，如果脚本的资源代码不包括OnStart，该代码会以一个EA交易编辑。")]),t._v(" "),n("p",[t._v("如果指标代码不包括OnCalculate函数，该指标的编辑不能完成。")]),t._v(" "),n("p",[n("b",[t._v("预定义变量")])]),t._v(" "),n("p",[t._v("在MQL5中有诸如Ask, Bid, Bars的预定义变量，变量点和数字的拼写有稍许不同：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("MQL4")]),t._v(" "),n("th",[t._v("MQL5")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("Digits")]),t._v(" "),n("td",[t._v("_Digits")])]),t._v(" "),n("tr",[n("td",[t._v("Point")]),t._v(" "),n("td",[t._v("_Point")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("_LastError")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("_Period")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("_Symbol")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("_StopFlag")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("_UninitReason")])])])]),t._v(" "),n("p",[n("b",[t._v("访问时间序列")])]),t._v(" "),n("p",[t._v("MQL5中没有像 "),n("code",[t._v("Open [], High [], Low [], Close [], Volume [] 和 Time []")]),t._v("这样预定义的时间序列。时间序列必要的深度能用相关访问时间序列函数来设定。")]),t._v(" "),n("p",[n("b",[t._v("EA交易")])]),t._v(" "),n("p",[t._v("MQL5的EA交易不需要强制存在处理新订单号收据事件的函数-OnTick，如在MQL4中一样（当接收新订单时执行MQL4的启动函数），因为在MQL5中EA交易可以包含几种类型的预定义处理器函数。")]),t._v(" "),n("ul",[n("li",[t._v("OnTick – 新订单号收据；")]),t._v(" "),n("li",[t._v("OnTimer –时间数据；")]),t._v(" "),n("li",[t._v("OnTrade - 交易事件；")]),t._v(" "),n("li",[t._v("OnChartEvent – 键盘鼠标输入事件，图解物件移动事件，完成文本编辑事件输入LabelEdit物件领域中的；")]),t._v(" "),n("li",[t._v("OnBookEvent – 市场深度状态更改事件。")])]),t._v(" "),n("p",[n("b",[t._v("自定义指标")])]),t._v(" "),n("p",[t._v("在MQL4中，指标缓冲区的数量是有限的，不能超过8。而在MQL5中则没有这个限制，但是要记得每个指标缓冲区需要在程序端分配部分内存，所以，这个新功能也不能滥用。")]),t._v(" "),n("p",[t._v("MQL4只提供了6种自定义指标绘图；而MQL5现在提供了18种绘画类型 。绘画类型的名称不变，但是指标的图解表示意义却显著变化。")]),t._v(" "),n("p",[t._v("指标缓冲区中索引趋势也并不相同。默认情况下，在MQL5中，所有指标缓冲区都有常用数组行为，例如0索引元素是历史记录中最古老的一个，随着指数增加，数据也从旧的换成新的。")]),t._v(" "),n("p",[t._v("受MQL4保护的工作自定义指标的唯一函数是SetIndexBuffer 。但是调用改变；现在应该指定存储在数组中的数据类型，连接指标缓冲区。")]),t._v(" "),n("p",[t._v("自定义指标属性也已更改并发展。添加了访问时间序列的新函数，所以全部算法需要重新审议。")]),t._v(" "),n("p",[n("b",[t._v("图解物件")])]),t._v(" "),n("p",[t._v("在MQL5中图解物件的数量显著增加。此外，图解物件现在可以及时置于时间表的图表中且可精确到秒-现在物件定位点不会四舍五入到当前价格图表开盘时间柱上。对于箭头物件，可以指定文本和标签绑定方式 ，并且对于标签，可以设置按钮，图表，位图标签和编辑定位定位物件的图表角 。")])])}),[],!1,null,null,null);n.default=s.exports}}]);