# vnpy学习笔记
---
2021/5/18
## 认识vnpy

vnpy的网站
www.vnpy.com

上海韦纳软件科技有限公司

备案服务号：

沪ICP备18006526号-3

沪公网安备 31011502017034号


vnpy是一套基于Python的量化交易程序开发框架。主要用于：

* 用 Python 语言来开发量化交易程序

* 对接不同类型的金融市场：证券、期货、期权、外汇、数字货币等

* 用历史数据来研究策略，进而实盘自动交易

* 定制扩展，满足个性化的交易需求，如：增加交易接口，修改GUI图形界面，开发复杂的策略应用等 

* 掌控源代码，规避程序后门，窃取策略、账号等风险

* 节约成本，如文华财经要收软件授权费或额外加点等

### vnpy支持的交易接口

vnpy.gateway,涵盖了国内外多种交易品种的交易接口，以后相信也会越来越多，如：

国内市场  CTP、飞马、飞创、恒生、中泰、华鑫、宽睿、中亿汇达、融航、鑫管家...

海外市场 富途、盈透、老虎证券、MT5...

数字货币 币安、火币、OKEX、BitMEX...

### vnpy 开箱即用 的各种量化应用

* cta_strategy —— CTA 策略引擎模块。就是（Commodity Trading Advisor Strategy），商品交易顾问策略，又称 管理期货策略（Managed Futures），CTA策略是指投资于期货市场的策略。

* cta_backtester —— CTA 策略回测模块。图形界面进行策略回测分析、参数优化等相关工作

* spread_trading —— 多合约价差套利模块。可以让用户手动启动算法买卖价差，也可以使用策略模板SpreadStrategyTemplate 来编写开发各种价差类的量化交易策略

* algo_trading —— 算法交易模块，提供多种常用的智能交易算法，如：
    > TWAP:时间加权平均价格

    > Sniper阻击手算法:只要价格优于您的限价价格即接受/执行，但从不公布 出价 或 要价

    >Iceberg 冰山指令:按比例逐步暴露订单直至全部成交

    >BestLimit最佳限价挂单

  等等，支持常用算法配置保存

* option_master —— 期权波动率交易模块，提供波动率曲线图表，给用户作判断分析，设置定价参考，通过算法自动扫描最优交易机会并瞬时下单完成交易

* portfolio_strategy —— 多合约组合策略模块，可用于历史数据回测和实盘自动交易

* script_trader —— 脚本策略模块，针对多标的组合类交易策略设计，同时也可以直接在命令行中实现REPL指令形式的交易，不支持回测功能。即只执行一次的程序指令

* market_radar —— 市场雷达模块，让用户基于Python数学公式，实时计算衍生行情数据

* chart_wizard —— 实时K线图表模块，可以实现简单的实时K线行情显示，直接在本地合约代码的编辑框中输入vt_symbol，点击【新建图表】的按钮就会打开对应合约的图表

* rpc_service —— RPC服务模块，允许将某一VN Trader进程启动为服务端，作为统一的行情和交易路由通道，允许多客户端同时连接，实现多进程分布式系统

* excel_rtd —— EXCEL RTD模块，RTD全称是RealTimeData，是微软主要为金融行业的实时数据需求设计的Excel数据对接方案。该模块用于实现在Excel中访问vn.py程序内任意数据信息的功能

* data_manager —— 历史数据管理模块，是VN Trader内部针对历史数据的全功能管理工具，支持数据导入导出、查看等功能，支持自定义数据表头格式

* data_recorder —— 行情记录模块，基于图形界面进行配置，根据需求实时录制Tick或者K线行情到数据库中，用于策略回测或者实盘初始化

* risk_manager —— 风险管理模块，提供包括交易流控、下单数量、活动委托、撤单总数等规则的统计和限制，有效实现前端风控功能

* portfolio_manager ——投资组合管理模块，该模块主要面向各种采用基本面策略的投资者，针对每个投资策略，创建一个独立的投资组合策略对象

* paper_account：模拟交易账户模块，是为了解决目前各类需要依赖服务端功能的仿真交易账户的问题，直接在交易客户端内部提供一套本地化的模拟交易环境，同时基于实盘行情的盘口数据进行委托撮合

*如此一看,vnpy提供的应用还挺多的，但主要用得上的其实只有少数几个，比如 CTA啊 ，历史数据回测啊。就好比一套高级音响，平时也就用来听个响得了，真把功能用全了，可费劲儿了。*

### 通用类组件

vnpy.api ——Python交易API接口封装，提供上述交易接口的底层对接实现。

vnpy.event —— 简洁易用的事件驱动引擎，作为事件驱动型交易程序的核心。

vnpy.rpc —— 跨进程通讯标准组件，用于实现分布式部署的复杂交易系统。

vnpy.chart —— Python高性能K线图表，支持大数据量图表显示以及实时数据更新功能。
